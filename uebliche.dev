{
  "actions": [
    {
      "label": "Run",
      "command": "bash",
      "args": [
        "-lc",
        "docker compose -f compose.dev.yml up --build"
      ],
      "env": {
        "HOST_PORT": "{HOST_PORT}",
        "DOCKBRIDGE_AUTOREGISTER": "{DOCKBRIDGE_AUTOREGISTER}",
        "DOCKBRIDGE_AUTOJOIN": "{DOCKBRIDGE_AUTOJOIN}"
      }
    },
    {
      "args": [
        "-lc",
        "./gradlew build --build-cache --parallel -PmcVersion={mcVersion} -Ploader_cache_file={loader_cache_file} -PonlyLoader={loader}; mkdir -p release/{loader}; for JAR in build/libs/*.jar; do case \"$JAR\" in *-sources.jar|*sources.jar|*-dev.jar|*dev.jar) continue;; esac; cp -v \"$JAR\" release/{loader}/; done"
      ],
      "command": "bash",
      "label": "Deploy mod",
      "data": {
        "CLEAN_RELEASE_DIR": "1",
        "CLEAN_RELEASE_DIR_AFTER": "1"
      },
      "deployTargets": {
        "key": "DEPLOY_TARGETS",
        "options": [
          "s3",
          "modrinth"
        ],
        "defaults": [
          "s3"
        ],
        "remember": true,
        "title": "Deploy targets",
        "separator": ","
      },
      "targetSelect": {
        "key": "loader",
        "options": [
          "fabric"
        ],
        "defaults": [
          "fabric"
        ],
        "remember": true,
        "title": "Deploy loaders",
        "channelKey": "UPDATE_CHANNEL",
        "channelOptions": [
          "release",
          "beta"
        ],
        "channelDefault": "release",
        "channelTitle": "Channel",
        "separator": ","
      },
      "uploads": [
        {
          "path": "release/**"
        }
      ]
    }
  ],
  "defaults": {
    "loader": "fabric",
    "version": "1.21.10",
    "runMode": "client"
  },
  "gradleArgs": [
    "--build-cache",
    "--parallel",
    "-PmcVersion={mcVersion}"
  ],
  "group": "uebliche/public",
  "id": "mod/polar-converter",
  "kind": "project",
  "changelogPath": "../../docs/polar-converter/changelog.md",
  "loaderSource": "matrix",
  "modrinth": {
    "projectId": "lJHqXILb"
  },
  "name": "Polar Converter",
  "path": ".",
  "runModes": [
    "client"
  ],
  "tasks": {
    "build": "build",
    "runClient": "runClient",
    "template": "{task}"
  },
  "versionRange": {
    "min": "1.21.9"
  },
  "vars": [
    {
      "key": "HOST_PORT",
      "label": "Docker host port (0 = auto)",
      "default": "0"
    },
    {
      "key": "DOCKBRIDGE_AUTOREGISTER",
      "label": "DockBridge autoregister",
      "default": "1",
      "options": [
        "0",
        "1"
      ]
    },
    {
      "key": "DOCKBRIDGE_AUTOJOIN",
      "label": "DockBridge autojoin",
      "default": "0",
      "options": [
        "0",
        "1"
      ]
    }
  ]
}
